[project]
name = "promptkit"
version = "0.1.0"
requires-python = ">=3.12"
dependencies = []

[tool.uv.sources]
promptkit-py = { workspace = true }
promptkit-tests-rpc = { workspace = true }

[tool.uv.workspace]
members = [
    "wasm/crates/python/bundled",
    "tests/rpc",
]

[dependency-groups]
dev = [
    "basedmypy>=2.10.0",
    "basedpyright>=1.31.1",
    "ruff>=0.11.2",
    "types-pyyaml>=6.0.12.20250516",
]

[tool.ruff]
exclude = ["tests/rpc/src/stub/*"]

[tool.ruff.lint]
select = ["ALL"]
ignore = [
    "COM812", "S101", "CPY",
    "D10", "D203", "D213",
    "PLR09", "PLR2004", "PLC2701", "C901",
]
extend-safe-fixes = ["TC"]
preview = true
future-annotations = true

[tool.ruff.lint.per-file-ignores]
"tests/**/*.py" = ["BLE001", "PLC0415", "DOC", "INP001", "ANN001"]
"tests/rpc/data/**/*.py" = ["PT"]

[tool.ruff.format]
preview = true

[tool.mypy]
files = ["wasm/crates/python/bundled"]
strict = true
python_version = "3.12"
disable_error_code = [
    "decorated-any",
    "explicit-any",
    "any",
]

[tool.pyright]
venv = "."
venvPath = ".venv"
include = ["wasm/crates/python/bundled"]
stubPath = "wasm/crates/python/bundled/typings"
typeCheckingMode = "strict"
enableExperimentalFeatures = true
reportMissingModuleSource = false
