package promptkit:vm;

interface host {
    use wasi:io/poll@0.2.0.{pollable};
    use wasi:io/streams@0.2.0.{stream-error};

    variant argument {
        cbor(list<u8>),
        iterator(argument-iterator),
    }
    resource argument-iterator {
        read: func() -> option<result<argument, stream-error>>;
        blocking-read: func() -> result<argument, stream-error>;
        subscribe: func() -> pollable;
    }
    enum log-level {
        debug,
        info,
        warn,
        error,
    }
    emit: func(%cbor: list<u8>);
    emit-log: func(%level: log-level, %log: string);
}